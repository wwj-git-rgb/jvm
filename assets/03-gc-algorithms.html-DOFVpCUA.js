import{_ as a,c as n,a as o,o as l}from"./app-BbxH2Yoy.js";const s={};function i(t,e){return l(),n("div",null,e[0]||(e[0]=[o('<h1 id="åƒåœ¾æ”¶é›†ç­–ç•¥ä¸ç®—æ³•" tabindex="-1"><a class="header-anchor" href="#åƒåœ¾æ”¶é›†ç­–ç•¥ä¸ç®—æ³•"><span>åƒåœ¾æ”¶é›†ç­–ç•¥ä¸ç®—æ³•</span></a></h1><p>ç¨‹åºè®¡æ•°å™¨ã€è™šæ‹Ÿæœºæ ˆã€æœ¬åœ°æ–¹æ³•æ ˆéšçº¿ç¨‹è€Œç”Ÿï¼Œä¹Ÿéšçº¿ç¨‹è€Œç­ï¼›æ ˆå¸§éšç€æ–¹æ³•çš„å¼€å§‹è€Œå…¥æ ˆï¼Œéšç€æ–¹æ³•çš„ç»“æŸè€Œå‡ºæ ˆã€‚è¿™å‡ ä¸ªåŒºåŸŸçš„å†…å­˜åˆ†é…å’Œå›æ”¶éƒ½å…·æœ‰ç¡®å®šæ€§ï¼Œåœ¨è¿™å‡ ä¸ªåŒºåŸŸå†…ä¸éœ€è¦è¿‡å¤šè€ƒè™‘å›æ”¶çš„é—®é¢˜ï¼Œå› ä¸ºæ–¹æ³•ç»“æŸæˆ–è€…çº¿ç¨‹ç»“æŸæ—¶ï¼Œå†…å­˜è‡ªç„¶å°±è·Ÿéšç€å›æ”¶äº†ã€‚</p><p>è€Œå¯¹äº Java å †å’Œæ–¹æ³•åŒºï¼Œæˆ‘ä»¬åªæœ‰åœ¨ç¨‹åºè¿è¡ŒæœŸé—´æ‰èƒ½çŸ¥é“ä¼šåˆ›å»ºå“ªäº›å¯¹è±¡ï¼Œè¿™éƒ¨åˆ†å†…å­˜çš„åˆ†é…å’Œå›æ”¶éƒ½æ˜¯åŠ¨æ€çš„ï¼Œåƒåœ¾æ”¶é›†å™¨æ‰€å…³æ³¨çš„æ­£æ˜¯è¿™éƒ¨åˆ†å†…å­˜ã€‚</p><h2 id="åˆ¤å®šå¯¹è±¡æ˜¯å¦å­˜æ´»" tabindex="-1"><a class="header-anchor" href="#åˆ¤å®šå¯¹è±¡æ˜¯å¦å­˜æ´»"><span>åˆ¤å®šå¯¹è±¡æ˜¯å¦å­˜æ´»</span></a></h2><p>è‹¥ä¸€ä¸ªå¯¹è±¡ä¸è¢«ä»»ä½•å¯¹è±¡æˆ–å˜é‡å¼•ç”¨ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯æ— æ•ˆå¯¹è±¡ï¼Œéœ€è¦è¢«å›æ”¶ã€‚</p><h3 id="å¼•ç”¨è®¡æ•°æ³•" tabindex="-1"><a class="header-anchor" href="#å¼•ç”¨è®¡æ•°æ³•"><span>å¼•ç”¨è®¡æ•°æ³•</span></a></h3><p>åœ¨å¯¹è±¡å¤´ç»´æŠ¤ç€ä¸€ä¸ª counter è®¡æ•°å™¨ï¼Œå¯¹è±¡è¢«å¼•ç”¨ä¸€æ¬¡åˆ™è®¡æ•°å™¨ +1ï¼›è‹¥å¼•ç”¨å¤±æ•ˆåˆ™è®¡æ•°å™¨ -1ã€‚å½“è®¡æ•°å™¨ä¸º 0 æ—¶ï¼Œå°±è®¤ä¸ºè¯¥å¯¹è±¡æ— æ•ˆäº†ã€‚</p><p>å¼•ç”¨è®¡æ•°ç®—æ³•çš„å®ç°ç®€å•ï¼Œåˆ¤å®šæ•ˆç‡ä¹Ÿå¾ˆé«˜ï¼Œåœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹å®ƒéƒ½æ˜¯ä¸€ä¸ªä¸é”™çš„ç®—æ³•ã€‚ä½†æ˜¯ä¸»æµçš„ Java è™šæ‹Ÿæœºé‡Œæ²¡æœ‰é€‰ç”¨å¼•ç”¨è®¡æ•°ç®—æ³•æ¥ç®¡ç†å†…å­˜ï¼Œä¸»è¦æ˜¯å› ä¸ºå®ƒå¾ˆéš¾è§£å†³å¯¹è±¡ä¹‹é—´å¾ªç¯å¼•ç”¨çš„é—®é¢˜ã€‚ï¼ˆè™½ç„¶å¾ªç¯å¼•ç”¨çš„é—®é¢˜å¯é€šè¿‡ Recycler ç®—æ³•è§£å†³ï¼Œä½†æ˜¯åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œå¼•ç”¨è®¡æ•°å˜æ›´ä¹Ÿè¦è¿›è¡Œæ˜‚è´µçš„åŒæ­¥æ“ä½œï¼Œæ€§èƒ½è¾ƒä½ï¼Œæ—©æœŸçš„ç¼–ç¨‹è¯­è¨€ä¼šé‡‡ç”¨æ­¤ç®—æ³•ã€‚ï¼‰</p><blockquote><p>ä¸¾ä¸ªæ —å­ ğŸ‘‰ å¯¹è±¡ objA å’Œ objB éƒ½æœ‰å­—æ®µ instanceï¼Œä»¤ objA.instance = objB å¹¶ä¸” objB.instance = objAï¼Œç”±äºå®ƒä»¬äº’ç›¸å¼•ç”¨ç€å¯¹æ–¹ï¼Œå¯¼è‡´å®ƒä»¬çš„å¼•ç”¨è®¡æ•°éƒ½ä¸ä¸º 0ï¼Œäºæ˜¯å¼•ç”¨è®¡æ•°ç®—æ³•æ— æ³•é€šçŸ¥ GC æ”¶é›†å™¨å›æ”¶å®ƒä»¬ã€‚</p></blockquote><h3 id="å¯è¾¾æ€§åˆ†ææ³•" tabindex="-1"><a class="header-anchor" href="#å¯è¾¾æ€§åˆ†ææ³•"><span>å¯è¾¾æ€§åˆ†ææ³•</span></a></h3><p>æ‰€æœ‰å’Œ GC Roots ç›´æ¥æˆ–é—´æ¥å…³è”çš„å¯¹è±¡éƒ½æ˜¯æœ‰æ•ˆå¯¹è±¡ï¼Œå’Œ GC Roots æ²¡æœ‰å…³è”çš„å¯¹è±¡å°±æ˜¯æ— æ•ˆå¯¹è±¡ã€‚</p><p>GC Roots æ˜¯æŒ‡ï¼š</p><ul><li>Java è™šæ‹Ÿæœºæ ˆï¼ˆæ ˆå¸§ä¸­çš„æœ¬åœ°å˜é‡è¡¨ï¼‰ä¸­å¼•ç”¨çš„å¯¹è±¡</li><li>æœ¬åœ°æ–¹æ³•æ ˆä¸­å¼•ç”¨çš„å¯¹è±¡</li><li>æ–¹æ³•åŒºä¸­å¸¸é‡å¼•ç”¨çš„å¯¹è±¡</li><li>æ–¹æ³•åŒºä¸­ç±»é™æ€å±æ€§å¼•ç”¨çš„å¯¹è±¡</li></ul><p>GC Roots å¹¶ä¸åŒ…æ‹¬å †ä¸­å¯¹è±¡æ‰€å¼•ç”¨çš„å¯¹è±¡ï¼Œè¿™æ ·å°±ä¸ä¼šæœ‰å¾ªç¯å¼•ç”¨çš„é—®é¢˜ã€‚</p><h2 id="å¼•ç”¨çš„ç§ç±»" tabindex="-1"><a class="header-anchor" href="#å¼•ç”¨çš„ç§ç±»"><span>å¼•ç”¨çš„ç§ç±»</span></a></h2><p>åˆ¤å®šå¯¹è±¡æ˜¯å¦å­˜æ´»ä¸â€œå¼•ç”¨â€æœ‰å…³ã€‚åœ¨ JDK 1.2 ä»¥å‰ï¼ŒJava ä¸­çš„å¼•ç”¨å®šä¹‰å¾ˆä¼ ç»Ÿï¼Œä¸€ä¸ªå¯¹è±¡åªæœ‰è¢«å¼•ç”¨æˆ–è€…æ²¡æœ‰è¢«å¼•ç”¨ä¸¤ç§çŠ¶æ€ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½æè¿°è¿™ä¸€ç±»å¯¹è±¡ï¼šå½“å†…å­˜ç©ºé—´è¿˜è¶³å¤Ÿæ—¶ï¼Œåˆ™ä¿ç•™åœ¨å†…å­˜ä¸­ï¼›å¦‚æœå†…å­˜ç©ºé—´åœ¨è¿›è¡Œåƒåœ¾æ”¶é›†åè¿˜æ˜¯éå¸¸ç´§å¼ ï¼Œåˆ™å¯ä»¥æŠ›å¼ƒè¿™äº›å¯¹è±¡ã€‚å¾ˆå¤šç³»ç»Ÿçš„ç¼“å­˜åŠŸèƒ½éƒ½ç¬¦åˆè¿™æ ·çš„åº”ç”¨åœºæ™¯ã€‚</p><p>åœ¨ JDK 1.2 ä¹‹åï¼ŒJava å¯¹å¼•ç”¨çš„æ¦‚å¿µè¿›è¡Œäº†æ‰©å……ï¼Œå°†å¼•ç”¨åˆ†ä¸ºäº†ä»¥ä¸‹å››ç§ã€‚ä¸åŒçš„å¼•ç”¨ç±»å‹ï¼Œä¸»è¦ä½“ç°çš„æ˜¯å¯¹è±¡ä¸åŒçš„å¯è¾¾æ€§çŠ¶æ€<code>reachable</code>å’Œåƒåœ¾æ”¶é›†çš„å½±å“ã€‚</p><h3 id="å¼ºå¼•ç”¨-strong-reference" tabindex="-1"><a class="header-anchor" href="#å¼ºå¼•ç”¨-strong-reference"><span>å¼ºå¼•ç”¨ï¼ˆStrong Referenceï¼‰</span></a></h3><p>ç±»ä¼¼ &quot;<code>Object obj = new Object()</code>&quot; è¿™ç±»çš„å¼•ç”¨ï¼Œå°±æ˜¯å¼ºå¼•ç”¨ï¼Œåªè¦å¼ºå¼•ç”¨å­˜åœ¨ï¼Œåƒåœ¾æ”¶é›†å™¨æ°¸è¿œä¸ä¼šå›æ”¶è¢«å¼•ç”¨çš„å¯¹è±¡ã€‚ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬<strong>é”™è¯¯åœ°ä¿æŒäº†å¼ºå¼•ç”¨</strong>ï¼Œæ¯”å¦‚ï¼šèµ‹å€¼ç»™äº† static å˜é‡ï¼Œé‚£ä¹ˆå¯¹è±¡åœ¨å¾ˆé•¿ä¸€æ®µæ—¶é—´å†…ä¸ä¼šè¢«å›æ”¶ï¼Œä¼šäº§ç”Ÿå†…å­˜æ³„æ¼ã€‚</p><h3 id="è½¯å¼•ç”¨-soft-reference" tabindex="-1"><a class="header-anchor" href="#è½¯å¼•ç”¨-soft-reference"><span>è½¯å¼•ç”¨ï¼ˆSoft Referenceï¼‰</span></a></h3><p>è½¯å¼•ç”¨æ˜¯ä¸€ç§ç›¸å¯¹å¼ºå¼•ç”¨å¼±åŒ–ä¸€äº›çš„å¼•ç”¨ï¼Œå¯ä»¥è®©å¯¹è±¡è±å…ä¸€äº›åƒåœ¾æ”¶é›†ï¼Œåªæœ‰å½“ JVM è®¤ä¸ºå†…å­˜ä¸è¶³æ—¶ï¼Œæ‰ä¼šå»è¯•å›¾å›æ”¶è½¯å¼•ç”¨æŒ‡å‘çš„å¯¹è±¡ã€‚JVM ä¼šç¡®ä¿åœ¨æŠ›å‡º OutOfMemoryError ä¹‹å‰ï¼Œæ¸…ç†è½¯å¼•ç”¨æŒ‡å‘çš„å¯¹è±¡ã€‚è½¯å¼•ç”¨é€šå¸¸ç”¨æ¥<strong>å®ç°å†…å­˜æ•æ„Ÿçš„ç¼“å­˜</strong>ï¼Œå¦‚æœè¿˜æœ‰ç©ºé—²å†…å­˜ï¼Œå°±å¯ä»¥æš‚æ—¶ä¿ç•™ç¼“å­˜ï¼Œå½“å†…å­˜ä¸è¶³æ—¶æ¸…ç†æ‰ï¼Œè¿™æ ·å°±ä¿è¯äº†ä½¿ç”¨ç¼“å­˜çš„åŒæ—¶ï¼Œä¸ä¼šè€—å°½å†…å­˜ã€‚</p><h3 id="å¼±å¼•ç”¨-weak-reference" tabindex="-1"><a class="header-anchor" href="#å¼±å¼•ç”¨-weak-reference"><span>å¼±å¼•ç”¨ï¼ˆWeak Referenceï¼‰</span></a></h3><p>å¼±å¼•ç”¨çš„<strong>å¼ºåº¦æ¯”è½¯å¼•ç”¨æ›´å¼±</strong>ä¸€äº›ã€‚å½“ JVM è¿›è¡Œåƒåœ¾å›æ”¶æ—¶ï¼Œ<strong>æ— è®ºå†…å­˜æ˜¯å¦å……è¶³ï¼Œéƒ½ä¼šå›æ”¶</strong>åªè¢«å¼±å¼•ç”¨å…³è”çš„å¯¹è±¡ã€‚</p><h3 id="è™šå¼•ç”¨-phantom-reference" tabindex="-1"><a class="header-anchor" href="#è™šå¼•ç”¨-phantom-reference"><span>è™šå¼•ç”¨ï¼ˆPhantom Referenceï¼‰</span></a></h3><p>è™šå¼•ç”¨ä¹Ÿç§°å¹½çµå¼•ç”¨æˆ–è€…å¹»å½±å¼•ç”¨ï¼Œå®ƒæ˜¯<strong>æœ€å¼±</strong>çš„ä¸€ç§å¼•ç”¨å…³ç³»ã€‚ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æœ‰è™šå¼•ç”¨çš„å­˜åœ¨ï¼Œå®Œå…¨ä¸ä¼šå¯¹å…¶ç”Ÿå­˜æ—¶é—´æ„æˆå½±å“ã€‚å®ƒä»…ä»…æ˜¯æä¾›äº†ä¸€ç§ç¡®ä¿å¯¹è±¡è¢« finalize ä»¥åï¼ŒåšæŸäº›äº‹æƒ…çš„æœºåˆ¶ï¼Œæ¯”å¦‚ï¼Œé€šå¸¸ç”¨æ¥åšæ‰€è°“çš„ Post-Mortem æ¸…ç†æœºåˆ¶ã€‚</p><h2 id="å›æ”¶å †ä¸­æ— æ•ˆå¯¹è±¡" tabindex="-1"><a class="header-anchor" href="#å›æ”¶å †ä¸­æ— æ•ˆå¯¹è±¡"><span>å›æ”¶å †ä¸­æ— æ•ˆå¯¹è±¡</span></a></h2><p>å¯¹äºå¯è¾¾æ€§åˆ†æä¸­ä¸å¯è¾¾çš„å¯¹è±¡ï¼Œä¹Ÿå¹¶ä¸æ˜¯æ²¡æœ‰å­˜æ´»çš„å¯èƒ½ã€‚</p><h3 id="åˆ¤å®š-finalize-æ˜¯å¦æœ‰å¿…è¦æ‰§è¡Œ" tabindex="-1"><a class="header-anchor" href="#åˆ¤å®š-finalize-æ˜¯å¦æœ‰å¿…è¦æ‰§è¡Œ"><span>åˆ¤å®š finalize() æ˜¯å¦æœ‰å¿…è¦æ‰§è¡Œ</span></a></h3><p><img src="https://cdn-doocs.oss-cn-shenzhen.aliyuncs.com/gh/doocs/jvm@main/images/finalize-method-process.jpg" alt=""></p><p>JVM ä¼šåˆ¤æ–­æ­¤å¯¹è±¡æ˜¯å¦æœ‰å¿…è¦æ‰§è¡Œ finalize() æ–¹æ³•ï¼Œå¦‚æœå¯¹è±¡æ²¡æœ‰è¦†ç›– finalize() æ–¹æ³•ï¼Œæˆ–è€… finalize() æ–¹æ³•å·²ç»è¢«è™šæ‹Ÿæœºè°ƒç”¨è¿‡ï¼Œé‚£ä¹ˆè§†ä¸ºâ€œæ²¡æœ‰å¿…è¦æ‰§è¡Œâ€ã€‚é‚£ä¹ˆå¯¹è±¡åŸºæœ¬ä¸Šå°±çœŸçš„è¢«å›æ”¶äº†ã€‚</p><p>å¦‚æœå¯¹è±¡è¢«åˆ¤å®šä¸ºæœ‰å¿…è¦æ‰§è¡Œ finalize() æ–¹æ³•ï¼Œé‚£ä¹ˆå¯¹è±¡ä¼šè¢«æ”¾å…¥ä¸€ä¸ª F-Queue é˜Ÿåˆ—ä¸­ï¼Œè™šæ‹Ÿæœºä¼šä»¥è¾ƒä½çš„ä¼˜å…ˆçº§æ‰§è¡Œè¿™äº› finalize()æ–¹æ³•ï¼Œä½†ä¸ä¼šç¡®ä¿æ‰€æœ‰çš„ finalize() æ–¹æ³•éƒ½ä¼šæ‰§è¡Œç»“æŸã€‚å¦‚æœ finalize() æ–¹æ³•å‡ºç°è€—æ—¶æ“ä½œï¼Œè™šæ‹Ÿæœºå°±ç›´æ¥åœæ­¢æŒ‡å‘è¯¥æ–¹æ³•ï¼Œå°†å¯¹è±¡æ¸…é™¤ã€‚</p><h3 id="å¯¹è±¡é‡ç”Ÿæˆ–æ­»äº¡" tabindex="-1"><a class="header-anchor" href="#å¯¹è±¡é‡ç”Ÿæˆ–æ­»äº¡"><span>å¯¹è±¡é‡ç”Ÿæˆ–æ­»äº¡</span></a></h3><p>å¦‚æœåœ¨æ‰§è¡Œ finalize() æ–¹æ³•æ—¶ï¼Œå°† this èµ‹ç»™äº†æŸä¸€ä¸ªå¼•ç”¨ï¼Œé‚£ä¹ˆè¯¥å¯¹è±¡å°±é‡ç”Ÿäº†ã€‚å¦‚æœæ²¡æœ‰ï¼Œé‚£ä¹ˆå°±ä¼šè¢«åƒåœ¾æ”¶é›†å™¨æ¸…é™¤ã€‚</p><blockquote><p>ä»»ä½•ä¸€ä¸ªå¯¹è±¡çš„ finalize() æ–¹æ³•åªä¼šè¢«ç³»ç»Ÿè‡ªåŠ¨è°ƒç”¨ä¸€æ¬¡ï¼Œå¦‚æœå¯¹è±¡é¢ä¸´ä¸‹ä¸€æ¬¡å›æ”¶ï¼Œå®ƒçš„ finalize() æ–¹æ³•ä¸ä¼šè¢«å†æ¬¡æ‰§è¡Œï¼Œæƒ³ç»§ç»­åœ¨ finalize() ä¸­è‡ªæ•‘å°±å¤±æ•ˆäº†ã€‚</p></blockquote><h2 id="å›æ”¶æ–¹æ³•åŒºå†…å­˜" tabindex="-1"><a class="header-anchor" href="#å›æ”¶æ–¹æ³•åŒºå†…å­˜"><span>å›æ”¶æ–¹æ³•åŒºå†…å­˜</span></a></h2><p>æ–¹æ³•åŒºä¸­å­˜æ”¾ç”Ÿå‘½å‘¨æœŸè¾ƒé•¿çš„ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ï¼Œæ¯æ¬¡åƒåœ¾æ”¶é›†åªæœ‰å°‘é‡çš„åƒåœ¾è¢«æ¸…é™¤ã€‚æ–¹æ³•åŒºä¸­ä¸»è¦æ¸…é™¤ä¸¤ç§åƒåœ¾ï¼š</p><ul><li>åºŸå¼ƒå¸¸é‡</li><li>æ— ç”¨çš„ç±»</li></ul><h3 id="åˆ¤å®šåºŸå¼ƒå¸¸é‡" tabindex="-1"><a class="header-anchor" href="#åˆ¤å®šåºŸå¼ƒå¸¸é‡"><span>åˆ¤å®šåºŸå¼ƒå¸¸é‡</span></a></h3><p>åªè¦å¸¸é‡æ± ä¸­çš„å¸¸é‡ä¸è¢«ä»»ä½•å˜é‡æˆ–å¯¹è±¡å¼•ç”¨ï¼Œé‚£ä¹ˆè¿™äº›å¸¸é‡å°±ä¼šè¢«æ¸…é™¤æ‰ã€‚æ¯”å¦‚ï¼Œä¸€ä¸ªå­—ç¬¦ä¸² &quot;bingo&quot; è¿›å…¥äº†å¸¸é‡æ± ï¼Œä½†æ˜¯å½“å‰ç³»ç»Ÿæ²¡æœ‰ä»»ä½•ä¸€ä¸ª String å¯¹è±¡å¼•ç”¨å¸¸é‡æ± ä¸­çš„ &quot;bingo&quot; å¸¸é‡ï¼Œä¹Ÿæ²¡æœ‰å…¶å®ƒåœ°æ–¹å¼•ç”¨è¿™ä¸ªå­—é¢é‡ï¼Œå¿…è¦çš„è¯ï¼Œ&quot;bingo&quot;å¸¸é‡ä¼šè¢«æ¸…ç†å‡ºå¸¸é‡æ± ã€‚</p><h3 id="åˆ¤å®šæ— ç”¨çš„ç±»" tabindex="-1"><a class="header-anchor" href="#åˆ¤å®šæ— ç”¨çš„ç±»"><span>åˆ¤å®šæ— ç”¨çš„ç±»</span></a></h3><p>åˆ¤å®šä¸€ä¸ªç±»æ˜¯å¦æ˜¯â€œæ— ç”¨çš„ç±»â€ï¼Œæ¡ä»¶è¾ƒä¸ºè‹›åˆ»ã€‚</p><ul><li>è¯¥ç±»çš„æ‰€æœ‰å¯¹è±¡éƒ½å·²ç»è¢«æ¸…é™¤</li><li>åŠ è½½è¯¥ç±»çš„ ClassLoader å·²ç»è¢«å›æ”¶</li><li>è¯¥ç±»çš„ java.lang.Class å¯¹è±¡æ²¡æœ‰åœ¨ä»»ä½•åœ°æ–¹è¢«å¼•ç”¨ï¼Œæ— æ³•åœ¨ä»»ä½•åœ°æ–¹é€šè¿‡åå°„è®¿é—®è¯¥ç±»çš„æ–¹æ³•ã€‚</li></ul><blockquote><p>ä¸€ä¸ªç±»è¢«è™šæ‹ŸæœºåŠ è½½è¿›æ–¹æ³•åŒºï¼Œé‚£ä¹ˆåœ¨å †ä¸­å°±ä¼šæœ‰ä¸€ä¸ªä»£è¡¨è¯¥ç±»çš„å¯¹è±¡ï¼šjava.lang.Classã€‚è¿™ä¸ªå¯¹è±¡åœ¨ç±»è¢«åŠ è½½è¿›æ–¹æ³•åŒºæ—¶åˆ›å»ºï¼Œåœ¨æ–¹æ³•åŒºè¯¥ç±»è¢«åˆ é™¤æ—¶æ¸…é™¤ã€‚</p></blockquote><h2 id="åƒåœ¾æ”¶é›†ç®—æ³•" tabindex="-1"><a class="header-anchor" href="#åƒåœ¾æ”¶é›†ç®—æ³•"><span>åƒåœ¾æ”¶é›†ç®—æ³•</span></a></h2><p>å­¦ä¼šäº†å¦‚ä½•åˆ¤å®šæ— æ•ˆå¯¹è±¡ã€æ— ç”¨ç±»ã€åºŸå¼ƒå¸¸é‡ä¹‹åï¼Œå‰©ä½™å·¥ä½œå°±æ˜¯å›æ”¶è¿™äº›åƒåœ¾ã€‚å¸¸è§çš„åƒåœ¾æ”¶é›†ç®—æ³•æœ‰ä»¥ä¸‹å‡ ä¸ªï¼š</p><h3 id="æ ‡è®°-æ¸…é™¤ç®—æ³•" tabindex="-1"><a class="header-anchor" href="#æ ‡è®°-æ¸…é™¤ç®—æ³•"><span>æ ‡è®°-æ¸…é™¤ç®—æ³•</span></a></h3><p><img src="https://cdn-doocs.oss-cn-shenzhen.aliyuncs.com/gh/doocs/jvm@main/images/mark-and-sweep.jpg" alt=""></p><p><strong>æ ‡è®°</strong>çš„è¿‡ç¨‹æ˜¯ï¼šéå†æ‰€æœ‰çš„ <code>GC Roots</code>ï¼Œç„¶åå°†æ‰€æœ‰ <code>GC Roots</code> å¯è¾¾çš„å¯¹è±¡<strong>æ ‡è®°ä¸ºå­˜æ´»çš„å¯¹è±¡</strong>ã€‚</p><p><strong>æ¸…é™¤</strong>çš„è¿‡ç¨‹å°†éå†å †ä¸­æ‰€æœ‰çš„å¯¹è±¡ï¼Œå°†æ²¡æœ‰æ ‡è®°çš„å¯¹è±¡å…¨éƒ¨æ¸…é™¤æ‰ã€‚ä¸æ­¤åŒæ—¶ï¼Œæ¸…é™¤é‚£äº›è¢«æ ‡è®°è¿‡çš„å¯¹è±¡çš„æ ‡è®°ï¼Œä»¥ä¾¿ä¸‹æ¬¡çš„åƒåœ¾å›æ”¶ã€‚</p><p>è¿™ç§æ–¹æ³•æœ‰ä¸¤ä¸ª<strong>ä¸è¶³</strong>ï¼š</p><ul><li>æ•ˆç‡é—®é¢˜ï¼šæ ‡è®°å’Œæ¸…é™¤ä¸¤ä¸ªè¿‡ç¨‹çš„æ•ˆç‡éƒ½ä¸é«˜ã€‚</li><li>ç©ºé—´é—®é¢˜ï¼šæ ‡è®°æ¸…é™¤ä¹‹åä¼šäº§ç”Ÿå¤§é‡ä¸è¿ç»­çš„å†…å­˜ç¢ç‰‡ï¼Œç¢ç‰‡å¤ªå¤šå¯èƒ½å¯¼è‡´ä»¥åéœ€è¦åˆ†é…è¾ƒå¤§å¯¹è±¡æ—¶ï¼Œæ— æ³•æ‰¾åˆ°è¶³å¤Ÿçš„è¿ç»­å†…å­˜è€Œä¸å¾—ä¸æå‰è§¦å‘å¦ä¸€æ¬¡åƒåœ¾æ”¶é›†åŠ¨ä½œã€‚</li></ul><h3 id="å¤åˆ¶ç®—æ³•-æ–°ç”Ÿä»£" tabindex="-1"><a class="header-anchor" href="#å¤åˆ¶ç®—æ³•-æ–°ç”Ÿä»£"><span>å¤åˆ¶ç®—æ³•ï¼ˆæ–°ç”Ÿä»£ï¼‰</span></a></h3><p><img src="https://cdn-doocs.oss-cn-shenzhen.aliyuncs.com/gh/doocs/jvm@main/images/mark-and-copy.jpg" alt=""></p><p>ä¸ºäº†è§£å†³æ•ˆç‡é—®é¢˜ï¼Œâ€œå¤åˆ¶â€æ”¶é›†ç®—æ³•å‡ºç°äº†ã€‚å®ƒå°†å¯ç”¨å†…å­˜æŒ‰å®¹é‡åˆ’åˆ†ä¸ºå¤§å°ç›¸ç­‰çš„ä¸¤å—ï¼Œæ¯æ¬¡åªä½¿ç”¨å…¶ä¸­çš„ä¸€å—ã€‚å½“è¿™ä¸€å—å†…å­˜ç”¨å®Œï¼Œéœ€è¦è¿›è¡Œåƒåœ¾æ”¶é›†æ—¶ï¼Œå°±å°†å­˜æ´»è€…çš„å¯¹è±¡å¤åˆ¶åˆ°å¦ä¸€å—ä¸Šé¢ï¼Œç„¶åå°†ç¬¬ä¸€å—å†…å­˜å…¨éƒ¨æ¸…é™¤ã€‚è¿™ç§ç®—æ³•æœ‰ä¼˜æœ‰åŠ£ï¼š</p><ul><li>ä¼˜ç‚¹ï¼šä¸ä¼šæœ‰å†…å­˜ç¢ç‰‡çš„é—®é¢˜ã€‚</li><li>ç¼ºç‚¹ï¼šå†…å­˜ç¼©å°ä¸ºåŸæ¥çš„ä¸€åŠï¼Œæµªè´¹ç©ºé—´ã€‚</li></ul><p>ä¸ºäº†è§£å†³ç©ºé—´åˆ©ç”¨ç‡é—®é¢˜ï¼Œå¯ä»¥å°†å†…å­˜åˆ†ä¸ºä¸‰å—ï¼š Edenã€From Survivorã€To Survivorï¼Œæ¯”ä¾‹æ˜¯ 8:1:1ï¼Œæ¯æ¬¡ä½¿ç”¨ Eden å’Œå…¶ä¸­ä¸€å— Survivorã€‚å›æ”¶æ—¶ï¼Œå°† Eden å’Œ Survivor ä¸­è¿˜å­˜æ´»çš„å¯¹è±¡ä¸€æ¬¡æ€§å¤åˆ¶åˆ°å¦å¤–ä¸€å— Survivor ç©ºé—´ä¸Šï¼Œæœ€åæ¸…ç†æ‰ Eden å’Œåˆšæ‰ä½¿ç”¨çš„ Survivor ç©ºé—´ã€‚è¿™æ ·åªæœ‰ 10% çš„å†…å­˜è¢«æµªè´¹ã€‚</p><p>ä½†æ˜¯æˆ‘ä»¬æ— æ³•ä¿è¯æ¯æ¬¡å›æ”¶éƒ½åªæœ‰ä¸å¤šäº 10% çš„å¯¹è±¡å­˜æ´»ï¼Œå½“ Survivor ç©ºé—´ä¸å¤Ÿï¼Œéœ€è¦ä¾èµ–å…¶ä»–å†…å­˜ï¼ˆæŒ‡è€å¹´ä»£ï¼‰è¿›è¡Œåˆ†é…æ‹…ä¿ã€‚</p><h4 id="åˆ†é…æ‹…ä¿" tabindex="-1"><a class="header-anchor" href="#åˆ†é…æ‹…ä¿"><span>åˆ†é…æ‹…ä¿</span></a></h4><p>ä¸ºå¯¹è±¡åˆ†é…å†…å­˜ç©ºé—´æ—¶ï¼Œå¦‚æœ Eden+Survivor ä¸­ç©ºé—²åŒºåŸŸæ— æ³•è£…ä¸‹è¯¥å¯¹è±¡ï¼Œä¼šè§¦å‘ MinorGC è¿›è¡Œåƒåœ¾æ”¶é›†ã€‚ä½†å¦‚æœ Minor GC è¿‡åä¾ç„¶æœ‰è¶…è¿‡ 10% çš„å¯¹è±¡å­˜æ´»ï¼Œè¿™æ ·å­˜æ´»çš„å¯¹è±¡ç›´æ¥é€šè¿‡åˆ†é…æ‹…ä¿æœºåˆ¶è¿›å…¥è€å¹´ä»£ï¼Œç„¶åå†å°†æ–°å¯¹è±¡å­˜å…¥ Eden åŒºã€‚</p><h3 id="æ ‡è®°-æ•´ç†ç®—æ³•-è€å¹´ä»£" tabindex="-1"><a class="header-anchor" href="#æ ‡è®°-æ•´ç†ç®—æ³•-è€å¹´ä»£"><span>æ ‡è®°-æ•´ç†ç®—æ³•ï¼ˆè€å¹´ä»£ï¼‰</span></a></h3><p><img src="https://cdn-doocs.oss-cn-shenzhen.aliyuncs.com/gh/doocs/jvm@main/images/mark-and-compact.jpg" alt=""></p><p><strong>æ ‡è®°</strong>ï¼šå®ƒçš„ç¬¬ä¸€ä¸ªé˜¶æ®µä¸<strong>æ ‡è®°-æ¸…é™¤ç®—æ³•</strong>æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼Œå‡æ˜¯éå† <code>GC Roots</code>ï¼Œç„¶åå°†å­˜æ´»çš„å¯¹è±¡æ ‡è®°ã€‚</p><p><strong>æ•´ç†</strong>ï¼šç§»åŠ¨æ‰€æœ‰<strong>å­˜æ´»çš„å¯¹è±¡</strong>ï¼Œä¸”æŒ‰ç…§å†…å­˜åœ°å€æ¬¡åºä¾æ¬¡æ’åˆ—ï¼Œç„¶åå°†æœ«ç«¯å†…å­˜åœ°å€ä»¥åçš„å†…å­˜å…¨éƒ¨å›æ”¶ã€‚å› æ­¤ï¼Œç¬¬äºŒé˜¶æ®µæ‰ç§°ä¸ºæ•´ç†é˜¶æ®µã€‚</p><p>è¿™æ˜¯ä¸€ç§è€å¹´ä»£çš„åƒåœ¾æ”¶é›†ç®—æ³•ã€‚è€å¹´ä»£çš„å¯¹è±¡ä¸€èˆ¬å¯¿å‘½æ¯”è¾ƒé•¿ï¼Œå› æ­¤æ¯æ¬¡åƒåœ¾å›æ”¶ä¼šæœ‰å¤§é‡å¯¹è±¡å­˜æ´»ï¼Œå¦‚æœé‡‡ç”¨å¤åˆ¶ç®—æ³•ï¼Œæ¯æ¬¡éœ€è¦å¤åˆ¶å¤§é‡å­˜æ´»çš„å¯¹è±¡ï¼Œæ•ˆç‡å¾ˆä½ã€‚</p><h3 id="åˆ†ä»£æ”¶é›†ç®—æ³•" tabindex="-1"><a class="header-anchor" href="#åˆ†ä»£æ”¶é›†ç®—æ³•"><span>åˆ†ä»£æ”¶é›†ç®—æ³•</span></a></h3><p>æ ¹æ®å¯¹è±¡å­˜æ´»å‘¨æœŸçš„ä¸åŒï¼Œå°†å†…å­˜åˆ’åˆ†ä¸ºå‡ å—ã€‚ä¸€èˆ¬æ˜¯æŠŠ Java å †åˆ†ä¸ºæ–°ç”Ÿä»£å’Œè€å¹´ä»£ï¼Œé’ˆå¯¹å„ä¸ªå¹´ä»£çš„ç‰¹ç‚¹é‡‡ç”¨æœ€é€‚å½“çš„æ”¶é›†ç®—æ³•ã€‚</p><ul><li>æ–°ç”Ÿä»£ï¼šå¤åˆ¶ç®—æ³•</li><li>è€å¹´ä»£ï¼šæ ‡è®°-æ¸…é™¤ç®—æ³•ã€æ ‡è®°-æ•´ç†ç®—æ³•</li></ul>',67)]))}const r=a(s,[["render",i]]),h=JSON.parse('{"path":"/03-gc-algorithms.html","title":"åƒåœ¾æ”¶é›†ç­–ç•¥ä¸ç®—æ³•","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"åˆ¤å®šå¯¹è±¡æ˜¯å¦å­˜æ´»","slug":"åˆ¤å®šå¯¹è±¡æ˜¯å¦å­˜æ´»","link":"#åˆ¤å®šå¯¹è±¡æ˜¯å¦å­˜æ´»","children":[{"level":3,"title":"å¼•ç”¨è®¡æ•°æ³•","slug":"å¼•ç”¨è®¡æ•°æ³•","link":"#å¼•ç”¨è®¡æ•°æ³•","children":[]},{"level":3,"title":"å¯è¾¾æ€§åˆ†ææ³•","slug":"å¯è¾¾æ€§åˆ†ææ³•","link":"#å¯è¾¾æ€§åˆ†ææ³•","children":[]}]},{"level":2,"title":"å¼•ç”¨çš„ç§ç±»","slug":"å¼•ç”¨çš„ç§ç±»","link":"#å¼•ç”¨çš„ç§ç±»","children":[{"level":3,"title":"å¼ºå¼•ç”¨ï¼ˆStrong Referenceï¼‰","slug":"å¼ºå¼•ç”¨-strong-reference","link":"#å¼ºå¼•ç”¨-strong-reference","children":[]},{"level":3,"title":"è½¯å¼•ç”¨ï¼ˆSoft Referenceï¼‰","slug":"è½¯å¼•ç”¨-soft-reference","link":"#è½¯å¼•ç”¨-soft-reference","children":[]},{"level":3,"title":"å¼±å¼•ç”¨ï¼ˆWeak Referenceï¼‰","slug":"å¼±å¼•ç”¨-weak-reference","link":"#å¼±å¼•ç”¨-weak-reference","children":[]},{"level":3,"title":"è™šå¼•ç”¨ï¼ˆPhantom Referenceï¼‰","slug":"è™šå¼•ç”¨-phantom-reference","link":"#è™šå¼•ç”¨-phantom-reference","children":[]}]},{"level":2,"title":"å›æ”¶å †ä¸­æ— æ•ˆå¯¹è±¡","slug":"å›æ”¶å †ä¸­æ— æ•ˆå¯¹è±¡","link":"#å›æ”¶å †ä¸­æ— æ•ˆå¯¹è±¡","children":[{"level":3,"title":"åˆ¤å®š finalize() æ˜¯å¦æœ‰å¿…è¦æ‰§è¡Œ","slug":"åˆ¤å®š-finalize-æ˜¯å¦æœ‰å¿…è¦æ‰§è¡Œ","link":"#åˆ¤å®š-finalize-æ˜¯å¦æœ‰å¿…è¦æ‰§è¡Œ","children":[]},{"level":3,"title":"å¯¹è±¡é‡ç”Ÿæˆ–æ­»äº¡","slug":"å¯¹è±¡é‡ç”Ÿæˆ–æ­»äº¡","link":"#å¯¹è±¡é‡ç”Ÿæˆ–æ­»äº¡","children":[]}]},{"level":2,"title":"å›æ”¶æ–¹æ³•åŒºå†…å­˜","slug":"å›æ”¶æ–¹æ³•åŒºå†…å­˜","link":"#å›æ”¶æ–¹æ³•åŒºå†…å­˜","children":[{"level":3,"title":"åˆ¤å®šåºŸå¼ƒå¸¸é‡","slug":"åˆ¤å®šåºŸå¼ƒå¸¸é‡","link":"#åˆ¤å®šåºŸå¼ƒå¸¸é‡","children":[]},{"level":3,"title":"åˆ¤å®šæ— ç”¨çš„ç±»","slug":"åˆ¤å®šæ— ç”¨çš„ç±»","link":"#åˆ¤å®šæ— ç”¨çš„ç±»","children":[]}]},{"level":2,"title":"åƒåœ¾æ”¶é›†ç®—æ³•","slug":"åƒåœ¾æ”¶é›†ç®—æ³•","link":"#åƒåœ¾æ”¶é›†ç®—æ³•","children":[{"level":3,"title":"æ ‡è®°-æ¸…é™¤ç®—æ³•","slug":"æ ‡è®°-æ¸…é™¤ç®—æ³•","link":"#æ ‡è®°-æ¸…é™¤ç®—æ³•","children":[]},{"level":3,"title":"å¤åˆ¶ç®—æ³•ï¼ˆæ–°ç”Ÿä»£ï¼‰","slug":"å¤åˆ¶ç®—æ³•-æ–°ç”Ÿä»£","link":"#å¤åˆ¶ç®—æ³•-æ–°ç”Ÿä»£","children":[]},{"level":3,"title":"æ ‡è®°-æ•´ç†ç®—æ³•ï¼ˆè€å¹´ä»£ï¼‰","slug":"æ ‡è®°-æ•´ç†ç®—æ³•-è€å¹´ä»£","link":"#æ ‡è®°-æ•´ç†ç®—æ³•-è€å¹´ä»£","children":[]},{"level":3,"title":"åˆ†ä»£æ”¶é›†ç®—æ³•","slug":"åˆ†ä»£æ”¶é›†ç®—æ³•","link":"#åˆ†ä»£æ”¶é›†ç®—æ³•","children":[]}]}],"git":{"updatedTime":1684977570000,"contributors":[{"name":"æ¨ç«‹æ»¨","username":"æ¨ç«‹æ»¨","email":"szuyanglb@outlook.com","commits":3,"url":"https://github.com/æ¨ç«‹æ»¨"},{"name":"yanglbme","username":"yanglbme","email":"szuyanglb@outlook.com","commits":17,"url":"https://github.com/yanglbme"},{"name":"æ¨ç«‹æ»¨","username":"æ¨ç«‹æ»¨","email":"contact@yanglibin.info","commits":1,"url":"https://github.com/æ¨ç«‹æ»¨"},{"name":"Yang Libin","username":"Yang Libin","email":"szuyanglb@outlook.com","commits":2,"url":"https://github.com/Yang Libin"},{"name":"kenny","username":"kenny","email":"ue4sprite@gmail.com","commits":1,"url":"https://github.com/kenny"}],"changelog":[{"hash":"d04ea31f7afffc499ad57841838a8ac2d2e2e609","time":1684977570000,"email":"szuyanglb@outlook.com","author":"Yang Libin","message":"chore: add prettier config"},{"hash":"27eab3415dbf9c2cb3003dacf56c27df9d2564db","time":1684975498000,"email":"ue4sprite@gmail.com","author":"kenny","message":"docs: update gc algorithms diagrams (#35)"},{"hash":"357b40acee0fd7aade271e66678daa3fa8cc7918","time":1636179175000,"email":"szuyanglb@outlook.com","author":"yanglbme","message":"docs: update 03-gc-algorithms.md (#23)"},{"hash":"046ea2d9712bb7361e2dd7c09569cf631c16253f","time":1630462961000,"email":"szuyanglb@outlook.com","author":"yanglbme","message":"docs: update parts 03,04,05,09"},{"hash":"84b1e1a6cd735a27a2753cf84cec68ffc14b65e4","time":1627991187000,"email":"szuyanglb@outlook.com","author":"yanglbme","message":"docs: update articles"},{"hash":"b9ac90393daa17ac91f072406788d0320cd7ef97","time":1603199026000,"email":"yanglbme@users.noreply.github.com","author":"yanglbme","message":"docs: prettify code"},{"hash":"f9e98925c09e1e048ff09e53f9d3d4181b500c43","time":1596535034000,"email":"szuyanglb@outlook.com","author":"Yang Libin","message":"docs: fix typo in 03-gc-algorithms.md"},{"hash":"44141143eaf33a804d08844e6437b0dc4995261e","time":1586069633000,"email":"szuyanglb@outlook.com","author":"yanglbme","message":"feat: add docsify and pagination"},{"hash":"19b86b64e4cb66437a44b1e964f5551eb03eb898","time":1561028776000,"email":"szuyanglb@outlook.com","author":"yanglbme","message":"docs: update 03-gc-algorithms.md(#5)"},{"hash":"b77788c0e0f8d5a13b9e494d6bb9ac44ea8951ec","time":1560165730000,"email":"szuyanglb@outlook.com","author":"yanglbme","message":"docs: update 03-gc-algorithms.md, thanks @liqiang1304"},{"hash":"51413fa297b97af8035bd4266c820b8aaaf10276","time":1532157270000,"email":"szuyanglb@outlook.com","author":"yanglbme","message":"Update 03-gc-algorithms.md"},{"hash":"b0a18e94e66ea6d402169c2587cfe7c4d0b1e468","time":1532141930000,"email":"szuyanglb@outlook.com","author":"yanglbme","message":"Update 03-gc-algorithms.md"},{"hash":"5812abcddf7be190ae25ff2f4fae537c1d75953c","time":1531985256000,"email":"szuyanglb@outlook.com","author":"yanglbme","message":"Update index"},{"hash":"fc29eb9f65b88bdd5dd5dcb0cc2ef782e463ff3b","time":1531984929000,"email":"szuyanglb@outlook.com","author":"yanglbme","message":"Add Index"},{"hash":"7a92c0e4989eb8136143d52d2281fb15257b44be","time":1531278268000,"email":"szuyanglb@outlook.com","author":"yanglbme","message":"Write EOF"},{"hash":"569bfa952b9816c72f6f3655ee2cf5936355921d","time":1531017489000,"email":"szuyanglb@outlook.com","author":"æ¨ç«‹æ»¨","message":"Update 03-gc-algorithms.md"},{"hash":"1f086d24c90f35d79b215831d174931861b9a39c","time":1530976271000,"email":"szuyanglb@outlook.com","author":"æ¨ç«‹æ»¨","message":"Update 03-gc-algorithms.md"},{"hash":"44bb9a33ee01e13ffc8817d77cfee3fefb474161","time":1530252948000,"email":"szuyanglb@outlook.com","author":"yanglbme","message":"Change path"},{"hash":"99ce82b1d8aa7c6e6451e108e35dfd958c05420c","time":1530186676000,"email":"szuyanglb@outlook.com","author":"yanglbme","message":"Remove TOC"},{"hash":"a112cfd4f8cbd9de87c68112101c0ce4ed4a3fe5","time":1530183324000,"email":"contact@yanglibin.info","author":"æ¨ç«‹æ»¨","message":"GitBook: [master] 12 pages modified"},{"hash":"26a1c453f8e4f2b56f07c9d36aae1959a1cf2e5f","time":1529933044000,"email":"szuyanglb@outlook.com","author":"yanglbme","message":"Format doc style"},{"hash":"3d396e0a4b59619bbcbf24b383cbb1b0a858e136","time":1529914171000,"email":"szuyanglb@outlook.com","author":"yanglbme","message":"Update format"},{"hash":"e7436bd325af1fb64abbeb4886609414a17f3327","time":1529912260000,"email":"szuyanglb@outlook.com","author":"yanglbme","message":"Rename filename"},{"hash":"98b6cee0d97181497ff871afacd0e730f209b17f","time":1529809521000,"email":"szuyanglb@outlook.com","author":"æ¨ç«‹æ»¨","message":"Create 03_åƒåœ¾æ”¶é›†ç­–ç•¥ä¸ç®—æ³•.md"}]},"filePathRelative":"03-gc-algorithms.md"}');export{r as comp,h as data};
